# 任务

## 1、(完成)

针对上证50、沪深300、中证500

统计出【沪港通股票】在其中的占比，按照自由流通市值/指数的总自由流通市值（持仓占比）



RDF：

SHSCChannelholdings（**确认是否可用**）



000016.SH 上证50

000905.SH 中证500

000300.SH  399300.SZ 沪深300 成份股及权重

 （通过wind搜索，手动下载excel，见D盘，**但是是月度频率**）

周总给的数据库：**日度频率**

```
select * from marketorg.zzzs_weightnextday t where t.effectivedate='20181218' and t.indexcode='000905'
```

```
select *  from marketorg.zzzs_weightnextday t where t.effectivedate='20181218' and t.indexcode='000300';
```



**沪股通成分：**

**select * from SHSCMembers;**

深股通成分：

SZSCMembers

陆股通成分：

HKSCMembers

## 2、（完成）

沪港通在中证500、沪深300中的比重

直接把权重加一起即可

**存在一个问题：SHSCMembers中存在的都是entry 和 remove信息，并不是每个交易日对应的沪股通的所有成分股，需要自己再做进一步处理**

(已完成)自己在代码中计算出：某一交易日的所有有效的沪股通成份股

**找wind经理找对应的数据接口(咨询结果无效)**

## 3、（完成）

Q：香港投资者买沪股通，是否是T+0？

A：否。

解释：

沪港通：“港股通”实行T+0，“沪股通”实行T+1

深港通：“港股通”实行T+0，“深股通”实行T+1

## 4、（完成）

在十大活跃成交股中，给定一个时间范围算出一个股票入选前十大的频数

**solution:之前爬取港交所官网数据的时候，数据库中已经存储了两张陆港通的表(一张wind的、一张港交所官网的)，可以拿来直接在数据库中做操作**

RDF：重新从wind数据库中取数据，

SHSCTop10ActiveStocks，在这个表的基础上，加上一列“频度”

（excel中也有数据）

## 5、（完成）

统计香港和上海两个市场的，两个方向的流入、流出的成交量、成交金额、每日额度剩余



**wind首页搜[沪深港通综合屏(SHSC)]**

WIND：

搜“沪深港通”，从全屏中选“历史额度”，导出excel

**联系wind经理，要接口名称**

邮件中有回复说明

**SHSCDailyStatistics(陆港通统计)**

数据要对应ITEM_CODE项目代码来逐个查询，如下是枚举值，

| 293004002 | 当年买入成交笔数             |
| :-------- | ---------------------------- |
| 293004001 | 当年买入成交金额             |
| 293004004 | 当年卖出成交笔数             |
| 293004003 | 当年卖出成交金额             |
| 293002010 | **当日成交笔数**             |
| 293002009 | 当日成交金额(港币)           |
| 293002008 | **当日成交金额(人民币)**     |
| 293002003 | **当日买入成交笔数**         |
| 293002005 | 当日买入成交金额(港币)       |
| 293002001 | **当日买入成交金额(人民币)** |
| 293002012 | 当日买入成交净额(港币)       |
| 293002011 | **当日买入成交净额(人民币)** |
| 293002004 | **当日卖出成交笔数**         |
| 293002006 | 当日卖出成交金额(港币)       |
| 293002002 | **当日卖出成交金额(人民币)** |
| 293001003 | **当日投资额度**             |
| 293001004 | **当日投资额度余额**         |
| 293003006 | 当月日均买入成交笔数         |
| 293003005 | 当月日均买入成交金额         |
| 293003008 | 当月日均卖出成交笔数         |
| 293003007 | 当月日均卖出成交金额         |
| 293003002 | **当月总买入成交笔数**       |
| 293003001 | **当月总买入成交金额**       |
| 293003004 | **当月总卖出成交笔数**       |
| 293003003 | **当月总卖出成交金额**       |
| 293002014 | 累计买入成交净额(港币)       |
| 293002013 | **累计买入成交净额(人民币)** |
| 293002007 | 买卖盘笔数                   |
| 293001001 | 总投资额度                   |
| 293001002 | **总投资额度可用余额**       |





```

# SHN  沪股通
# HKS  沪市港股通

# SZN  深股通
# HKSZ 深市港股通

# MHS  港股通
# MHN  陆股通

293002010**当日成交笔数**
293002008**当日成交金额(人民币)**
293002003**当日买入成交笔数**
293002001**当日买入成交金额(人民币)**
293002011**当日买入成交净额(人民币)**
293002004**当日卖出成交笔数**
293002002**当日卖出成交金额(人民币)**
293001003**当日投资额度**
293001004**当日投资额度余额**
293003002**当月总买入成交笔数**
293003001**当月总买入成交金额**
293003004**当月总卖出成交笔数**
293003003**当月总卖出成交金额**
293002013**累计买入成交净额(人民币)**
293001002**总投资额度可用余额**

select * from SHSCDailyStatistics where S_INFO_EXCHMARKET='HKSZ' and ITEM_CODE='293002010';
 


```





### 以上内容都要给出绘图（如符合）





```
select * from AShareCapitalization;

select * from AIndexSSE50Weight;

select * from AIndexCSI500Weight;

select * from AIndexHS300CloseWeight;

select * from AIndexHS300Weight;

select * from SHSCDailyStatistics;

select * from AShareCapitalization;

select * from SHSCMembers where S_INFO_WINDCODE = '600438.SH';


select distinct S_INFO_WINDCODE from SHSCMembers;

select distinct ENTRY_DT from SHSCMembers;

select * from SHSCMembers;

select * from SZSCMembers;



select * from AShareFreeFloat where S_INFO_WINDCODE like '000001%';

select * from SHSCChannelholdings where S_INFO_WINDCODE = '600519.SH' and TRADE_DT = '20170413';
select * from SHSCChannelholdings where S_INFO_EXCHMARKETNAME='SHN' and TRADE_DT = '20170520';
select * from SHSCChannelholdings where S_INFO_EXCHMARKETNAME='SZN' and TRADE_DT = '20181227';

select distinct TRADE_DT from SHSCChannelholdings where S_INFO_EXCHMARKETNAME='SHN' Order By TRADE_DT ASC ;
S_INFO_WINDCODE

select * from SHSCDailyStatistics;

select distinct S_INFO_EXCHMARKET from SHSCDailyStatistics;

select * from SHSCDailyStatistics where S_INFO_EXCHMARKET='HKSZ';

```









