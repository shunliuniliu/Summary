# brain teaser题目

1. **判断给定的整数是否是一个2的幂**
思路：
二进制比特位中只有一位是1，其余是0。那就意味着比他们这些幂小于1的数中，不可能在有相同位置的1存在。 换句话说就是如果一个数与比它小1的数做位运算AND，如果最终答案是0，那么这个数就是2的整次幂。
做法：
答案就是(b & (b-1)) == 0。

**衍生题：**
如何快速找出一个32位整数的二进制表达里有多少个"1"？用关于"1"的个数的线性时间？

分析思路：
如果看了上面的那个题，那么这个题的思路也就相当明确了，就是通过位运算来解决问题。答案：

（关于total数字位数线性时间）：for(n=0; b; b >>= 1) if (b & 1) n++;
（关于total "1"的个数线性时间）：for(n=0; b; n++) b &= b-1;


2. **有一项体育锦标赛，淘汰赛制，有64位选手参加。两两配对比赛分出胜负（被淘汰选手不再比赛），然后胜利的选手进入下一轮淘汰赛，如此进行直到决出冠军。请问这届锦标赛一共发生了多少场比赛？(如果你的面试官是个体育爱好者，没准就会那这个来试试你)**


进一步解决问题，最直观的解法当然是一轮一轮的数，64进32的时候有32场，32进16有16场...循环加起来32+16+8+4+2+1 = 63场；这个方法行得通，但是显得比较笨拙，如果选手是111人，多余的人轮空本轮，那么挨轮数的办法并不好用。

对于这类问题，往往最重要的是挖掘问题的本质。问题是统计比赛的场数，比赛的场数又和比赛的人数直接相关。但是这个关系可以更深入的解读：一场比赛有两名选手参加，需要淘汰一名选手。换一种想法，每淘汰一名选手，需要一场比赛。那么n个选手决出冠军，自然需要淘汰n-1名选手，因此需要n-1场比赛。


3. **1000瓶酒，已知有且仅有1瓶有毒。酒中的毒素在进入机体内10个小时之后发作致死。目前你有若干只小白鼠可做你的实验品，但是你只有11个小时的时间，请问最少需要多少只小白鼠才能确定哪瓶是有毒的酒？**


回到我们之前得出的问题本质，最终的最终，我们需要用小白鼠的生死来判断结果。那么小白鼠最后的状态其实非生即死，想的快的同学可能马上反应过来，这不就是1和0两个状态嘛。那么，1只小白鼠可以有2个状态（生、死），2只小白鼠可以有4个状态（1生2生、1生2死、1死2生、1死2死），归纳演绎，10只小白鼠就可以有2的10次方个状态，即1024个状态，完全可以覆盖1000瓶酒，似乎解决了问题！

答案是对的，但是我们怎么想出一个安排小白鼠喝酒的方法，能使最后10只小白鼠的生死状态对应一瓶酒呢？

怎么做呢？拿最高位的那一只小白鼠来举例子，让它喝所有最高位上为1的瓶号的酒，(1 *********), 共有512瓶，如果它最后死了，那么这一位一定是1，否则是0；对其他位的小白是使用相同的方法，即可得解。

(对于数字的敏感是解决这个问题的关键，当你看到『生死』这种二元的状态和1000这个数的时候，IT界的朋友应该马上可以联想到2的10次方是1024，可以完全覆盖1000个状态。最后逆推结果的时候，可以适当用纸币勾画一个具体例子，然后归纳演绎，问题得解。)


4. **有一个双人下棋游戏在一个圆桌上进行。每个player都有无限多个Coins。他们需要在桌子上轮流放置Coin，每次只能放置一枚，在放置过程中新的Coins不能与原来放过的Cons重叠。如果哪位player没有地方放置新的coin，那么这个player谁输了。请给出一种策略能够保证无论对手怎么下棋，都可以获得胜利。**

思路：
第一反应就是如何能够让对收没有地方放置Coin，并没有仔细地去思考这个游戏的相关背景，在这到题目中，圆桌就是最为关键的解题突破口。想起圆，这个常见有特殊的形状，学过初中几何的同学都会立马反应出很多相关的定理和特征，但是在这么多特征中想很快的找到解题答案也不是很容易的事情，但是再仔细想想，大家会发现大部分关于圆的特征都有一个特殊的点来作为背后证明的支撑，那就是圆心

我们知道过圆心的直线与圆相交之后所组成的线段称为直径，那么直径的特殊性就可以很快的被找到，那就是在直径上除了圆心之外，任意一点都能有与圆心相应的对称点。找到了这个特征，这道题也就被解出来了。那就是无论对手如何放置，那个对称点总会有位置去放置自己的棋子。那么显而易见，抢圆心点就是这个策略的第一步了。
成为先行者，并且在桌子中心放置第一枚Coin，以后的Coins总是放在与对手刚才放的地方相对称的位置。这样，只要对手能放，玩家一定也有地方放而且必胜。

5. **一个矩形(长方体)蛋糕，蛋糕内部有一块矩形（长方体）的空洞。只用一刀，如何将蛋糕切成大小相等的两块？**
思路：
长方体只要经过中心的任意平面，就可等分体积。
所以，大长方体和内部小长方体空洞的中心连成一条线，经过这个线的任意平面即可等分体积。


6. **你有四个装药丸的罐子，每个药丸都有一定的重量，被污染的药丸是没被污染的重量＋1，只称量一次，如何判断哪个罐子的药被污染了?（只能称一次）**

思路：
给四个罐子编上号,1、2、3、4.然后1号拿一个,2号拿2个,3号拿3个,4号拿4个,称一下,若是都没被污染,应该重10个重量,若是11个重量就是1号罐,12就是2号罐,13就是3号罐,14就是4号罐
（一般地，只要这四个罐子分别拿出的药丸数量都不一样就行）


7. **一个监狱里有十个囚犯,1,2,3,4,5,6,7,8,9,10号. 一天监狱长对他们说, 明天我要对你们行刑, 规矩是这样的:你们一个面对一个背后排成一排站好.1号站第一个.10号最后一个,然后我在你们每人头上放一顶帽子, 要么是黑要么是白.帽子的数量和颜色都是无规律的, 但你们可以看到前面的人戴的都是什么颜色的帽子.(比如10号可以看到前面9个人的帽子,9号可以看到前面8个人的帽子. )然后我从10号开始问头上10号戴的是什么颜色的帽子, 回答对了救活下来, 回答错了就马上杀掉, 接着问下一个9号, 以此类推.你们只能回答黑或者白. 如果说其他的话马上所有都杀掉..于是十个犯人那天晚上就开始商量对策如何让尽可能多的人活下来.问: 什么对策能活下来最多的人?**

解答：
第一题是9.5个，先设定黑色=1，白色=0，第10人根据前9人帽子颜色的相加，得出一个数值n，然后他随便说一个颜色，有一半的存活几率，第9人根据n是奇数还是偶数，减掉前面8人的帽子数量，即可得出自己的帽子颜色是0还是1，同理剩余的人。

8. **一个村庄里有两种人,一种褐色眼睛一种蓝色眼睛. 这个村庄里有个奇怪的规矩: 如果一个人知道自己眼睛的颜色, 那他那天晚上就会死. 所以没有人会公开谈论自己的眼睛的颜色, 但是村民们会每天白天互相全部人见面, 看看其他所有人的眼睛的颜色以及有没有人死了.有一天, 一个外来的人来到了这个村庄, 说了一句话: 我看到了蓝眼睛...然后他走了再也没回来过.如果所有村民有足够的推理能力, 那么一定时间以后村子里所有的人都会死光...问:为什么会全部死光? 这个过程又需要多长时间?**

解答：
第二题是3天，第一天全体村民得知有一个人是蓝眼睛，第二天发现所有人都没有死，判断出被看到的蓝眼睛就是自己，于是蓝色全部死亡，而第三天剩余的人发现褐色同伴全部活着，就推理出了自己的颜色，全部死亡。


9. **现有十二个小球，其中一个球的重量与其它十一个的重量不相同，但不知道是轻还是重。试用天平称三次，把这个非标准球找出来，并指出它比标准球是轻还是重。（有多种解法）**
  参考答案1：
  首先，把12个小球分成三等份，每份四只。
  拿出其中两份放到天平两侧称（第一次）
  情况一：天平是平衡的。
  那么那八个拿上去称的小球都是正常的，特殊的在四个里面。
  把剩下四个小球拿出三个放到一边，另一边放三个正常的小球（第二次）
  如天平平衡，特殊的是剩下那个。
  如果不平衡，在天平上面的那三个里。而且知道是重了还是轻了。
  剩下三个中拿两个来称，因为已经知道重轻，所以就可以知道特殊的了。（第三次）
  情况二：天平倾斜。
  特殊的小球在天平的那八个里面。
  把重的一侧四个球记为A1A2A3A4，轻的记为B1B2B3B4。
  剩下的确定为四个正常的记为C。
  把A1B2B3B4放到一边，B1和三个正常的C小球放一边。（第二次）
  情况一：天平平衡了。
  特殊小球在A2A3A4里面，而且知道特殊小球比较重。
  把A2A3称一下，就知道三个里面哪个是特殊的了。（第三次）
  情况二：天平依然是A1的那边比较重。
  特殊的小球在A1和B1之间。
  随便拿一个和正常的称，就知道哪个特殊了。（第三次）
  情况三：天平反过来，B1那边比较重了。
  特殊小球在B2B3B4中间，而且知道特殊小球比较轻。
  把B2B3称一下，就知道哪个是特殊的了。（第三次）


10. **如果你有无穷多的水，一个3夸脱的和一个5夸脱的提桶，你如何准确称出4夸脱的水？**

先5夸脱装水，然后到往3夸脱。
把三跨脱水倒掉
然后把五跨脱剩下的水倒在三夸脱。
再次将五跨托装满，并向3夸脱倒水
此时在五跨托中正为4跨脱水

11. **为什么下水道的盖子是圆的？**


圆盖的任何直径都不会比放它的圆圈小,盖子不会掉下去。方盖的任何一个边都比放它的方圈的对角线短，但盖子立起时会掉下去。此题是为了考察一个人的换角度思考问题的能力。 

这是一个经过很多次尝试才确定下的图形，只有圆形的井盖找不到对角线，无论哪一点到对应边的距离都是一样的．而拿正方形来看，他的边长和它的对角线长不一样，所以在井盖发生移动的时候只有圆形的才最安全。而且同样的材料做出的井盖也是圆形的面积最大，如果把它放到井口时，无论怎么放，它与井口的直径都是稍小的，所以它掉不到井下，在井下操作的工作人员是安全的。


12. **100个人按照座位顺序排队登机，但是第一个人喝醉了所以在1-100之间随机选一个座位坐，之后的人如果自己的座位没有被占就坐自己的座位，否则就在剩下的座位中随机选择一个。问最后一个人坐到自己的座位的概率？**


解答：考察最后一个人登机的时候剩下的最后一个座位，只能是1或者100

可以反证如下：如果是第2~99之间的，既然现在还剩着，那么这个号的人登机的时候一定也还剩着，那么这个号的人登机的时候会坐这个座位，矛盾。

然后可以知道对前99个人而言，1号和100号是对称的，所以最后剩下1号和剩下100号两个事件概率应该一样，所以都是1/2


13. **52张扑克，A随机抽一张然后B随机抽一张，问A的牌比B大的概率？**

解答：
A大于B: P1
A等于B: P2
A小于B: P3

P1 = P3，P1+P2+P3 = 1
因为P2 = 3/51
所以P1 = （1 - P2）/2 = 8/17

14. **在一个圆周随机选n个点，这n个点在一个半圆内的概率？** 
（任选一个i点，i点的顺时针有一个半圆，逆时针也有一个半圆，剩下的n-1个点随机分在两个半圆里，全在一个圆。
只考虑顺时针，因为同时考虑逆时针会出现overlap，所以只考虑i点的顺时针半圆，
剩下的n-1个点（i+1, i+2 ...... N, 1, ......, i-1）全在一个半圆中的概率是（1/2）^（n-1）
所有事件的累加，总共n个点都有自己的顺时针半圆，累加和就是n/2^(n-1)）

解答：对这n个点分别编号为1~n，Ei表示剩下的n-1个点都在第i个点开始顺时针的半圆内这一事件。可以知道Ei互为互斥事件，而且n个点在一个半圆内这一事件是n个Ei的并集。

P(Ei) = 1/2^(n-1)

因为计算P(Ei)的时候，可以认为第i个点是固定的，剩下n-1个在两个半圆之间随机选择。

那么P（n个点在一个半圆内）=n/2^(n-1)



可以推广到这n个点在弧度小于pi的任意弧的概率，假设占整个圆周的比例为x (x<=0.5)

概率是n*x^(n-1)


15. **52张扑克随机抽5张，问有一个炸弹的概率？**

解答：一共有52选5种可能，有一个炸弹的可能是13*48

第一个是从13种炸弹中选一个，48是从剩下的牌选一个



**是三带二的概率？**

解答：可能的数目是13*12（4选3）*（4选2）。13是选一个有三张的，12是从剩下的中选一个有两张的，然后再从选定的种类中分别抽三张和两章。



**有两个对子和一个单张的概率？**

解答：这个要稍微注意一下，因为两个对子是对称的。可能的数目有13*12/2*（4选2）*（4选2）*44

之所以要除以2，是因为有这种可能：第一次选对子的时候选了A，第二次选了2.这个和第一次选了2第二次选了A其实是一样的，所以要除以2，只用其中的一种。

16. **由11个人组成的委员会保管一个保险柜，安了若干把锁，适当分配钥匙后发现，任意六**
**由11个人组成的委员会保管一个保险柜，安了若干把锁，适当分配钥匙后发现，任意六名委员同时到场可以打开保险柜。任何五名就不能打开，试问，至少要按多少把锁，锁最少时，应该怎样分配钥匙才能满足要求？**

解答：
（至少6个人在场才能打开所有的锁。也就是对任意的五人组，一定有一个锁是他们五个都没有钥匙的。可以这样做：对任意的五人组，配一个单独的锁，这个锁的6个钥匙给另外6个人。）

任意六名委员同时到场可以打开保险柜，说明每把锁至少要配6把钥匙并分配给6位不同的委员。
此外，任意五名委员都不能打开保险柜，而任意五名委员一共有C(11,5)=462种组合，这462种组合各对应了一把无法打开的锁，所以，最少的锁的数目是462把。
在这个方案下，对应于任意一组五人组合，我们就把其中一把锁的钥匙分配给另外6个委员，从而满足了题目要求。


17.  **单败淘汰赛制n个人参赛，决出冠军共进行多少场比赛？**
思路：冠军只有一个，必然要淘汰n-1个选手才能产生冠军，又因为是单败淘汰赛，淘汰n-1个选手必然有n-1场比赛。

18. **至少多少个人，能够让至少有两个人同一天生日的概率大于等于0.5？假设一年365天。**
解答：至少有两人同一天生日的概率大于等于0.5意味着所有人生日都不同的概率<=0.5

n个人（n<365）生日都不同的概率是

365*364*...*(365-n+1)/365^n

这个数字小于等于0.5的最小的n是23.

（自己还没计算出来）
19. **错排问题：5个信寄给5个人，全部寄错的概率？**

解答：第i个信对了记为事件Ei。那么∪Ei就是至少有一个对了的概率。全错的概率等于1-P（∪Ei）。

在本题中，P(Ei) = 1/5

两个的并的概率等于1/20，三个是1/60，四个和五个是1/120

前面的系数分别为5选1，5选2...

是5，10，10，5，1

则P（∪Ei）=1-0.5+1/6-1/24+1/120 = 19/30

全错的概率是11/30



20. 
**（没明白算出来的结果）****


**比赛问题：2^n个选手，进行n轮比赛决出冠军。假设他们的能力各不相同，能力高的一定能赢能力低的，输的人就淘汰。问前两名选手能在最后一轮比赛相遇的概率？**


解答：可以这样想，有2^n个位置，前2^(n-1)个决出决赛的一个名额，后2^(n-1)个决出决赛的另一个名额。那么前两名选手在决赛相遇等价于分别在前半部分和后半部分。所以概率是

2^(n-1)/(2^n-1)


